(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"71AG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalHelpers={loadScript:function(e,t,n){void 0===t&&(t=!1);var r=document.createElement("script");r.src=e,r.async=!!t,r.onload=n,document.head.appendChild(r)}}},G3iS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicroEvent=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){this._events[e]||(this._events[e]=[]),this._events[e].push([t,n])},e.prototype.once=function(e,t,n){var r=this;this._events[e]||(this._events[e]=[]),this._events[e].push([function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];t.apply(n||r,Array.prototype.slice.call(o,1)),r.off(e,t)},n])},e.prototype.off=function(e,t){this._events[e]&&this._events[e].splice(this._events[e].findIndex(function(e){return e[0]===t}),1)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this._events[e])for(var r=0;r<this._events[e].length;r++)this._events[e][r][0].apply(this._events[e][r][1]||this,Array.prototype.slice.call(arguments,1))},e}()},Jcmr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("oAJy");window,window,t.StorageHelper=function(){function e(){}return e.prototype.get=function(e){return r.getItem(e)},e.prototype.set=function(e,t){return r.setItem(e,t)},e.prototype.update=function(e,t,n){void 0===n&&(n=!1)},e.prototype.remove=function(e){return r.removeItem(e)},e}()},Si66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a="https",u="";window.platform.isApp?(window.platform.isEmulator?(o="10.0.2.2",a="http",r="ws",i=4e3):(o="frontend-freelance.com",a="https",r="wss",i=void 0),u=a+"://"+o+(i?":"+i:"")+"/api/v1/"):(o=location.hostname,i=parseInt(location.port,10)||void 0,a=location.protocol.replace(/:/g,""),u="/api/v1/"),t.getAddress=function(){return{host:a,ip:o,port:i,apiUrl:u,ws:r,secure:!0}}},ZuBy:function(e,t,n){"use strict";var r=n("mrSG").__extends,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n("G3iS"),u=n("71AG"),c=n("Jcmr"),s=n("Si66"),f=n("yLGS"),l=function(){function e(e,t){this._steps=e,this._progressBarEl=t,this.progress=0}return e.prototype.step=function(e,t){var n=this,r=this._steps.find(function(t){return t.id===e});if(!r)throw new Error("step not found: "+e);r.perc="number"==typeof t&&t<100?t:100;var o=0;this._steps.forEach(function(e){return e.perc&&(o+=e.perc/n._steps.length)}),this._updateEl(o,r.text),"done"===e&&this.destroy()},e.prototype.fakeProgress=function(e,t,n,r){var o=this;void 0===n&&(n=0),void 0===r&&(r=0);var i=this._steps.find(function(t){return t.id===e}),a=Date.now();setInterval(function(){var e=Date.now()-a;o.step(i.id,e/t*100)},100)},e.prototype.destroy=function(){var e=this;this._progressBarEl&&this._progressBarEl.parentNode&&(this._progressBarEl.parentNode.style.opacity=0,setTimeout(function(){e._progressBarEl&&e._progressBarEl.parentNode&&e._progressBarEl.parentNode.parentNode&&e._progressBarEl.parentNode.parentNode.removeChild(e._progressBarEl.parentNode)},500))},e.prototype._updateEl=function(e,t){this._progressBarEl&&(this._progressBarEl.children[0].innerHTML=e.toFixed(0)+"% "+t,this._progressBarEl.children[1].style.width=e+"%")},e}(),d=function(e){function t(){var t=e.call(this)||this;return t.platform=window.platform,t.storage=new c.StorageHelper,t.notification=new f.NotificationHelper,t.helpers=u.generalHelpers,t.data={},t.isReady=!1,t.angularReady=!1,t.angularReady$=Promise.resolve(),t._boottySteps=[{id:"init",value:5,text:"booting"},{id:"config",value:5,text:"config"},{id:"data",value:40,text:"data"},{id:"statics",value:48,text:"statics"},{id:"done",value:2,text:"done"}],t.prettyBootty=new l(t._boottySteps,document.getElementById("initialProgressBar")),t.prettyBootty.step("init"),t}return r(t,e),t.prototype.init=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.prettyBootty.step("config"),this.address=s.getAddress(),[4,this._loadStoredUser()];case 1:return e.sent(),this.prettyBootty.step("data",0),[4,this._preload()];case 2:return e.sent(),this.data.notifications&&this.notification.updateBadgeCounter(parseInt(this.data.notifications.unreadCount,10)),[4,this._waitUntilAllScriptsLoaded()];case 3:return e.sent(),this.isReady=!0,this.emit("ready",!0),[2]}})})},t.prototype._preload=function(){var e=this;return Promise.all(["./spritesheet.png"].map(function(e){return new Promise(function(t){var n=new Image;n.src=e,n.onload=n.onerror=t})}).concat([new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e.address.apiUrl+"authenticate?profile=true",!0),r.setRequestHeader("Authorization",e.user?"Bearer "+e.user.token:""),r.onprogress=function(t){return e.prettyBootty.step("data",t.loaded/t.total*100)},r.onreadystatechange=function(){return o(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return 4!=r.readyState?[3,4]:200!=r.status?[3,1]:(this.data=JSON.parse(r.response),this.data.user&&(this.user=this.data.user,delete this.data.user),t(),[3,4]);case 1:return 401!==r.status?[3,3]:[4,this.removeStoredUser()];case 2:return e.sent(),window.location.reload(),[2];case 3:n(),e.label=4;case 4:return[2]}})})},r.send()})]))},t.prototype.loadAds=function(){if(this.platform.isApp){var e={};/(android)/i.test(navigator.userAgent)?(e.banner="ca-app-pub-1181429338292864/7213864636",e.interstitial="ca-app-pub-1181429338292864/7213864636"):/(ipod|iphone|ipad)/i.test(navigator.userAgent)&&(e.banner="ca-app-pub-1181429338292864/7213864636",e.interstitial="ca-app-pub-1181429338292864/7213864636"),window.AdMob.createBanner({adSize:"BANNER",overlap:!0,height:60,adId:e.banner,position:window.AdMob.AD_POSITION.BOTTOM_CENTER,autoShow:!0,isTesting:!1}),document.addEventListener("onAdFailLoad",function(e){console.error(e)})}},t.prototype._waitUntilAllScriptsLoaded=function(){var e=this;return new Promise(function(t,n){var r=2.5*(Date.now()-e.platform.startTime.getTime());if(e.prettyBootty.fakeProgress("statics",r),"loading"!==document.readyState)return t();document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),t()},!1)})},t.prototype.updateStoredUser=function(e){return void 0===e&&(e=this.user),o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.user=e,[4,this.storage.set("current-user",e)];case 1:return t.sent(),[2]}})})},t.prototype.removeStoredUser=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.storage.remove("current-user")];case 1:return e.sent(),[2]}})})},t.prototype._loadStoredUser=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.storage.get("current-user")];case 1:return(e=t.sent())&&e.token&&(this.user=e),[2]}})})},t.prototype.initNotifications=function(){return this.notification.init()},t}(a.MicroEvent);t.App=d,t.app=window.app=new d,t.app.init().catch(console.error)},mrSG:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return u}),n.d(t,"__param",function(){return c}),n.d(t,"__metadata",function(){return s}),n.d(t,"__awaiter",function(){return f}),n.d(t,"__generator",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return h}),n.d(t,"__spread",function(){return v}),n.d(t,"__await",function(){return y}),n.d(t,"__asyncGenerator",function(){return b}),n.d(t,"__asyncDelegator",function(){return _}),n.d(t,"__asyncValues",function(){return g}),n.d(t,"__makeTemplateObject",function(){return m}),n.d(t,"__importStar",function(){return w}),n.d(t,"__importDefault",function(){return S});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}function u(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}c((r=r.apply(e,t||[])).next())})}function l(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||u(e,t)})})}function u(e,t){try{(n=o[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,s):f(i[0][2],n)}catch(e){f(i[0][3],e)}var n}function c(e){u("next",e)}function s(e){u("throw",e)}function f(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){e[r]&&(t[r]=function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:o?o(t):t})}}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):p(e)}function m(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},oAJy:function(e,t,n){var r;e.exports=function e(t,n,o){function i(u,c){if(!n[u]){if(!t[u]){if(!c&&"function"==typeof r&&r)return r(u,!0);if(a)return a(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){return i(t[u][1][e]||e)},f,f.exports,e,t,n,o)}return n[u].exports}for(var a="function"==typeof r&&r,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,t,n){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(f),u=e.document.createTextNode("");a.observe(u,{characterData:!0}),n=function(){u.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var c=new e.MessageChannel;c.port1.onmessage=f,n=function(){c.port2.postMessage(0)}}var s=[];function f(){var e,t;r=!0;for(var n=s.length;n;){for(t=s,s=[],e=-1;++e<n;)t[e]();n=s.length}r=!1}t.exports=function(e){1!==s.push(e)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var i={},a=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function f(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var a=h(function(){t(o,r)});"error"===a.status&&r(a.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=s,s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===u||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?l(n,this.state===u?e:t,this.outcome):this.queue.push(new f(n,e,t)),n},f.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){i.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=h(d,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=u,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},s.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},s.reject=function(e){var t=new this(o);return i.reject(t,e)},s.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),u=0,c=-1,s=new this(o);++c<n;)f(e[c],c);return s;function f(e,o){t.resolve(e).then(function(e){a[o]=e,++u!==n||r||(r=!0,i.resolve(s,a))},function(e){r||(r=!0,i.reject(s,e))})}},s.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r=-1,a=new this(o);++r<t;)this.resolve(e[r]).then(function(e){n||(n=!0,i.resolve(a,e))},function(e){n||(n=!0,i.reject(a,e))});return a}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function u(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function s(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}var f,l,d="local-forage-detect-blob-support",p=Object.prototype.toString;function h(e){var t=l[e.name],n={};n.promise=new a(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady=t.dbReady?t.dbReady.then(function(){return n.promise}):n.promise}function v(e,t){return new a(function(n,r){if(e.db){if(!t)return n(e.db);h(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),function(e){var t=l[e.name].deferredOperations.pop();t&&t.resolve()}(e)}})}function y(e){return i([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(atob(e.data))],{type:e.type})}function b(e){return e&&e.__local_forage_encoded_blob}function _(e){var t=this,n=t._initReady().then(function(){var e=l[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(n,e,e),n}function g(e,t,n){try{var r=e.db.transaction(e.storeName,t);n(null,r)}catch(r){if(!e.db||"InvalidStateError"===r.name)return function(e){h(e);for(var t=l[e.name].forages,n=0;n<t.length;n++)t[n]._dbInfo.db&&(t[n]._dbInfo.db.close(),t[n]._dbInfo.db=null);return v(e,!1).then(function(e){for(var n=0;n<t.length;n++)t[n]._dbInfo.db=e}).catch(function(t){throw function(e,t){var n=l[e.name].deferredOperations.pop();n&&n.reject(t)}(e,t),t})}(e).then(function(){var r=e.db.transaction(e.storeName,t);n(null,r)});n(r)}}var m={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];l||(l={});var o=l[n.name];o||(l[n.name]=o={forages:[],db:null,dbReady:null,deferredOperations:[]}),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=_);var i=[];function u(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var s=o.forages[c];s!==t&&i.push(s._initReady().catch(u))}var f=o.forages.slice(0);return a.all(i).then(function(){return n.db=o.db,function(e){return v(e,!1)}(n)}).then(function(e){return n.db=e,function(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version>e.db.version;if(e.version<e.db.version&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}(n,t._defaultConfig.version)?function(e){return v(e,!0)}(n):e}).then(function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<f.length;r++){var i=f[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}})},_support:function(){try{if(!o)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){g(n._dbInfo,"readonly",function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;b(r)&&(r=y(r));var o=e(r,n.key,u++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r},getItem:function(e,t){var n=this;e=s(e);var r=new a(function(t,r){n.ready().then(function(){g(n._dbInfo,"readonly",function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),b(e)&&(e=y(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r},setItem:function(e,t,n){var r=this;e=s(e);var o=new a(function(n,o){var u;r.ready().then(function(){return u=r._dbInfo,"[object Blob]"===p.call(t)?(e=u.db,"boolean"==typeof f?a.resolve(f):function(e){return new a(function(t){var n=e.transaction(d,"readwrite"),r=i([""]);n.objectStore(d).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return f=e})).then(function(e){return e?t:(n=t,new a(function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)}));var n}):t;var e}).then(function(t){g(r._dbInfo,"readwrite",function(i,a){if(i)return o(i);try{var u=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=u.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){o(c.error?c.error:c.transaction.error)}}catch(e){o(e)}})}).catch(o)});return u(o,n),o},removeItem:function(e,t){var n=this;e=s(e);var r=new a(function(t,r){n.ready().then(function(){g(n._dbInfo,"readwrite",function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){r(a.error?a.error:a.transaction.error)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r},clear:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){g(t._dbInfo,"readwrite",function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){n(i.error?i.error:i.transaction.error)}}catch(e){n(e)}})}).catch(n)});return u(n,e),n},length:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){g(t._dbInfo,"readonly",function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,e),n},key:function(e,t){var n=this,r=new a(function(t,r){e<0?t(null):n.ready().then(function(){g(n._dbInfo,"readonly",function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),u=!1,c=a.openCursor();c.onsuccess=function(){var n=c.result;n?0===e?t(n.key):u?t(n.key):(u=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}})}).catch(r)});return u(r,t),r},keys:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){g(t._dbInfo,"readonly",function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}})}).catch(n)});return u(n,e),n}},w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=/^~~local_forage_type~([^~]+)~/,I="__lfsc__:".length,E=I+"arbf".length,O=Object.prototype.toString;function x(e){var t,n,r,o,i,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var s=new ArrayBuffer(a),f=new Uint8Array(s);for(t=0;t<u;t+=4)n=w.indexOf(e[t]),r=w.indexOf(e[t+1]),o=w.indexOf(e[t+2]),i=w.indexOf(e[t+3]),f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return s}function A(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=w[n[t]>>2],r+=w[(3&n[t])<<4|n[t+1]>>4],r+=w[(15&n[t+1])<<2|n[t+2]>>6],r+=w[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var k={serialize:function(e,t){var n="";if(e&&(n=O.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===O.call(e.buffer))){var r,o="__lfsc__:";e instanceof ArrayBuffer?(r=e,o+="arbf"):(r=e.buffer,"[object Int8Array]"===n?o+="si08":"[object Uint8Array]"===n?o+="ui08":"[object Uint8ClampedArray]"===n?o+="uic8":"[object Int16Array]"===n?o+="si16":"[object Uint16Array]"===n?o+="ur16":"[object Int32Array]"===n?o+="si32":"[object Uint32Array]"===n?o+="ui32":"[object Float32Array]"===n?o+="fl32":"[object Float64Array]"===n?o+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(o+A(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n="~~local_forage_type~"+e.type+"~"+A(this.result);t("__lfsc__:blob"+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,I))return JSON.parse(e);var t,n=e.substring(E),r=e.substring(I,E);if("blob"===r&&S.test(n)){var o=n.match(S);t=o[1],n=n.substring(o[0].length)}var a=x(n);switch(r){case"arbf":return a;case"blob":return i([a],{type:t});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:x,bufferToString:A},j={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new a(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(o){o.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=k,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,u=0;u<a;u++){var c=i.item(u),s=c.value;if(s&&(s=o.serializer.deserialize(s)),void 0!==(s=e(s,c.key,u+1)))return void t(s)}t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r},getItem:function(e,t){var n=this;e=s(e);var r=new a(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r},setItem:function(e,t,n){return(function e(t,n,r,o){var i=this;t=s(t);var c=new a(function(a,u){i.ready().then(function(){void 0===n&&(n=null);var c=n,s=i._dbInfo;s.serializer.serialize(n,function(n,f){f?u(f):s.db.transaction(function(e){e.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[t,n],function(){a(c)},function(e,t){u(t)})},function(n){if(n.code===n.QUOTA_ERR){if(o>0)return void a(e.apply(i,[t,c,r,o-1]));u(n)}})})}).catch(u)});return u(c,r),c}).apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=s(e);var r=new a(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return u(r,t),r},clear:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return u(n,e),n},length:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n},key:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return u(r,t),r},keys:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})}).catch(n)});return u(n,e),n}},B={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=t.name+"/",t.storeName!==this._defaultConfig.storeName&&(t.keyPrefix+=t.storeName+"/"),!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=k,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,u=0;u<i;u++){var c=localStorage.key(u);if(0===c.indexOf(r)){var s=localStorage.getItem(c);if(s&&(s=t.serializer.deserialize(s)),void 0!==(s=e(s,c.substring(o),a++)))return s}}});return u(r,t),r},getItem:function(e,t){var n=this;e=s(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return u(r,t),r},setItem:function(e,t,n){var r=this;e=s(e);var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new a(function(o,i){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}})})});return u(o,n),o},removeItem:function(e,t){var n=this;e=s(e);var r=n.ready().then(function(){localStorage.removeItem(n._dbInfo.keyPrefix+e)});return u(r,t),r},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return u(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return u(t,e),t},key:function(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return u(r,t),r},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r});return u(n,e),n}},P=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},N={},R={},T={INDEXEDDB:m,WEBSQL:j,LOCALSTORAGE:B},D=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],C={description:"",driver:[T.INDEXEDDB._driver,T.WEBSQL._driver,T.LOCALSTORAGE._driver].slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function M(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function L(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=P(t[n])?t[n].slice():t[n])}return arguments[0]}var F=new(function(){function e(t){for(var n in function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),T)if(T.hasOwnProperty(n)){var r=T[n],o=r._driver;this[n]=o,N[o]||this.defineDriver(r)}this._defaultConfig=L({},C),this._config=L({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new a(function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=D.concat("_initStorage"),a=0,u=i.length;a<u;a++){var c=i[a];if(!c||!e[c]||"function"!=typeof e[c])return void n(o)}var s=function(n){N[r]&&console.info("Redefining LocalForage driver: "+r),N[r]=e,R[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(s,n):s(!!e._support):s(!0)}catch(e){n(e)}});return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=N[e]?a.resolve(N[e]):a.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=a.resolve(k);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;P(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function u(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}var s=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=s.then(function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(u).catch(n)}i();var c=new Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}}(o)})}).catch(function(){i();var e=new Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet}),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!R[e]},e.prototype._extend=function(e){L(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=D.length;e<t;e++)M(this,D[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=F},{3:3}]},{},[4])(4)},yLGS:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n("ZuBy");t.NotificationHelper=function(){function e(){this._token=null,this._originalTitle=document.title}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!0,configurable:!0}),e.prototype.init=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return i.app.platform.isApp?[4,this._loadApp()]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,this._loadBrowser()];case 3:e.sent(),e.label=4;case 4:return[2]}})})},e.prototype.updateBadgeCounter=function(e){try{e?i.app.platform.isApp?cordova.plugins.notification.badge.set(e):document.title=this._originalTitle+" ("+e+")":i.app.platform.isApp?cordova.plugins.notification.badge.clear():document.title=this._originalTitle}catch(e){console.error(e)}},e.prototype.askPermissionBrowser=function(){return r(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,(e=firebase.messaging()).requestPermission()];case 1:return r.sent(),t=this,[4,e.getToken()];case 2:return t._token=r.sent(),i.app.emit("firebase-token-refresh",this._token),[3,4];case 3:return n=r.sent(),console.error(n),[3,4];case 4:return[2]}})})},e.prototype._onNotification=function(e){try{e.data||console.info("no-data",e);var t="string"==typeof e.data?JSON.parse(e.data):e.data;if(!i.app.user||!i.app.user._id||i.app.user._id!==t.__userId)return console.warn("notification __userId mismatch");i.app.emit("notification",{title:e.title,data:t})}catch(t){console.info("message",e),console.error(t)}},e.prototype._loadBrowser=function(){return r(this,void 0,void 0,function(){var e=this;return o(this,function(t){return[2,new Promise(function(t,n){var a=document.createElement("script");a.src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js",a.async=!0,a.onload=function(){firebase.initializeApp({apiKey:"AAAAcOdrZII:APA91bHdt3bPaqUW4sWF7tht0xJs13B_X-4Svm4TlWeLnXXFoVsPxWRQGxUPdqudCP1OHkQ-IJCVO10DJKi8G2fLekqfpy0xAXGakQmj-7FZW3DwB18BxcHNIWlgNC9T3T1tbXEnbaxM",messagingSenderId:"484918912130"});var n=firebase.messaging();n.onMessage(function(t){return e._onNotification(t.data)}),n.onTokenRefresh(function(){return r(e,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return e=this,[4,n.getToken()];case 1:return e._token=t.sent(),i.app.emit("firebase-token-refresh",this._token),[2]}})})}),e.askPermissionBrowser().catch(console.error),t()},document.head.appendChild(a)})]})})},e.prototype._loadApp=function(){var e=this;cordova.plugins.notification.badge.configure({indicator:"circular",autoClear:!1}),FirebasePlugin.hasPermission(function(t){t.isEnabled?FirebasePlugin.getToken(function(t){e._token=t}):FirebasePlugin.grantPermission(function(t){FirebasePlugin.getToken(function(t){e._token=t})})}),FirebasePlugin.onNotificationOpen(function(t){return e._onNotification(t)},function(e){throw e}),FirebasePlugin.onTokenRefresh(function(t){e._token=t,i.app.emit("firebase-token-refresh",e._token)},function(e){console.error(e)})},e}()}}]);