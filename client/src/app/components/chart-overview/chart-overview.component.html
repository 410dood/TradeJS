<div class="instrument-list-outer">
    <div class="filter-list" #navbar>
        <h4>Popular</h4>
        <a [ngClass]="{active: activeFilter === 'all'}" (click)="toggleFilter('all')">All</a>
        <a [ngClass]="{active: activeFilter === 'all popular'}" (click)="toggleFilter('all popular')">All popular</a>
        <a [ngClass]="{active: activeFilter === 'all open'}" (click)="toggleFilter('all open')">All open</a>
        <a [ngClass]="{active: activeFilter === 'rise and fall'}" (click)="toggleFilter('rise and fall')">Risers and fallers</a>
        <a [ngClass]="{active: activeFilter === 'favorite'}" (click)="toggleFilter('favorite')">My favorites</a>
        <h4>Resources</h4>
        <a [ngClass]="{active: activeFilter === 'resources'}" (click)="toggleFilter('resources')">All resources</a>
        <a [ngClass]="{active: activeFilter === 'resources pop'}" (click)="toggleFilter('resources pop')">Popular resources</a>
        <h4>Indices</h4>
        <a [ngClass]="{active: activeFilter === 'all2'}" (click)="toggleFilter('all2')">All indices</a>
        <a [ngClass]="{active: activeFilter === 'all2'}" (click)="toggleFilter('all2')">Popular indices</a>
        <h4>Crypto</h4>
        <a [ngClass]="{active: activeFilter === 'all2'}" (click)="toggleFilter('all2')">All crypto</a>
        <a [ngClass]="{active: activeFilter === 'all2'}" (click)="toggleFilter('all2')">Popular crypto</a>
        <h4>Forex</h4>
        <a [ngClass]="{active: activeFilter === 'forex'}" (click)="toggleFilter('forex')">All forex</a>
        <a [ngClass]="{active: activeFilter === 'forex pop'}" (click)="toggleFilter('forex pop')">Popular forex</a>
    </div>

    <div class="instrument-list">
        <div class="table-header hidden-xs-down">
            <div>Instrument</div>
            <div>Diff</div>
            <div>Bid</div>
            <div>Ask</div>
            <div>H / L</div>
            <div></div>
        </div>

        <ul>
            <li *ngFor="let symbol of symbols; trackBy:trackByFunc" [ngClass]="{'active': activeSymbol === symbol}" [attr.data-symbol]="symbol.options.name"
                (click)="setActiveSymbol($event, symbol)">

                <ng-container *ngIf="symbol.options$ | async as options">
                    <div>
                        <span>{{options.displayName}}</span>
                    </div>
                    <div>
                        <span>24h</span>
                        <span [ngClass]="{'text-positive': options.changedAmount > 0, 'text-negative': options.changedAmount < 0}">
                            {{options.changedAmount}} %
                        </span>
                    </div>
                    <div>
                        <span>B {{options.bid || 0}}</span>
                    </div>
                    <div>
                        <span>S {{options.ask || 0}}</span>
                    </div>
                    <div *ngIf="options.halted">Market closed</div>
                    <div *ngIf="!options.halted">{{options.high | number : '1.2-2'}} / {{options.low | number : '1.2-2'}}</div>
                    <div>
                        <i (click)="onClickToggleFavorite($event, symbol);" [ngClass]="{'active': userService.model.options.favorites.includes(options.name)}"
                            class="fa fa-star"></i>
                        <i (click)="activeMenu = 'alarm'" class="fa fa-bell"></i>
                        <i class="fa fa-info-circle"></i>
                    </div>
                </ng-container>
            </li>
        </ul>
    </div>

    <div class="side-menu" [ngClass]="{'open': activeMenu !== null}">
        <section *ngIf="activeMenu === 'alarm'">
            <header>
                <i (click)="activeMenu = null" class="fa fa-close"></i>
                <h5>{{activeSymbol?.options.displayName}} Alarms</h5>
            </header>
            <main>
                <ul>
                    <li>New</li>
                    <li>Active</li>
                </ul>
                <form class="form" (ngSubmit)="login($event)" #loginForm="ngForm">
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">Price
                        </label>
                    </div>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">Momentum
                        </label>
                    </div>
                    <div class="form-check form-check-inline disabled">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3"> 3
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="passwordConf">Amount</label>
                        <input id="passwordConf" type="text" class="form-control" name="password" value="{{activeSymbol?.options.bid}}" required/>
                    </div>

                    <div class="col-sm-12 col-lg-4">
                        <button class="btn btn-primary pull-right">Submit</button>
                    </div>
                </form>
            </main>
        </section>
    </div>
</div>

<div class="chart-header">
    <h5>{{activeSymbol?.options.name}}</h5>
    <ul class="header-buttons">
        <li>
            <button (click)="charts[0].instrumentModel.setZoom(-1)" [ngClass]="{'active': (activeSymbol$ | async)?.options.zoom === 1}"
               type="button" class="text-dark button-zoom-out btn-menu" aria-expanded="false">
                <i class="fa fa-search-minus">
                </i>
            </button>
        </li>

        <li>
            <button (click)="activeSymbol && activeSymbol.setZoom(1)" [ngClass]="{'active': (activeSymbol$ | async)?.options.zoom === 10}"
                type="button" class="text-dark btn-menu button-zoom-in" aria-expanded="false">
                <i class="fa fa-search-plus"></i>
            </button>
        </li>
        <li>
            <button (click)="activeSymbol && activeSymbol.set({graphType: 'ohlc'})" type="button" class="text-dark button-ohlc btn-menu"
                [ngClass]="{'active': (activeSymbol$ | async)?.options.graphType === 'ohlc'}" aria-expanded="false">
                <i class="fa fa-line-chart"></i>
            </button>
        </li>
        <li>
            <button (click)="activeSymbol && activeSymbol.set({graphType: 'candlestick'})" [ngClass]="{'active': (activeSymbol$ | async)?.options.graphType === 'candlestick'}"
                type="button" class="text-dark button-candlestick btn-menu">
                <i class="fa fa-bar-chart"></i>
            </button>
        </li>
        <li class="dropdown">
            <button type="button" class="dropdown-toggle btn-menu" data-toggle="dropdown" aria-haspopup="true">
                <span>{{chart.instrumentModel?.options.timeFrame}}</span>
            </button>

            <ul class="dropdown-menu">
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'M1'})">M1</a>
                </li>
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'M5'})">M5</a>
                </li>
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'M15'})">M15</a>
                </li>
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'M30'})">M30</a>
                </li>
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'H1'})">H1</a>
                </li>
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'H4'})">H4</a>
                </li>
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'D1'})">D</a>
                </li>
                <li>
                    <a (click)="activeSymbol && activeSymbol.set({timeFrame: 'W1'})">W</a>
                </li>
            </ul>
        </li>
        <li class="dropdown">
            <button type="button" class="dropdown-toggle btn-menu" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <span>Indicator</span>
            </button>

            <ul class="dropdown-menu">
                <li class="dropdown-submenu">
                    <a tabindex="-1" href="#">Indicators</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-header">Custom</li>

                        <li role="separator" class="divider"></li>
                        <li class="dropdown-header">Default</li>

                        <li>
                            <a (click)="addIndicator('MA')">MA</a>
                        </li>

                        <li class="dropdown-submenu pull-left">
                            <a href="#">Even More..</a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="#">3rd level</a>
                                </li>
                                <li>
                                    <a href="#">3rd level</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">Another action</a>
                </li>
                <li>
                    <a href="#">Something else here</a>
                </li>
                <li role="separator" class="divider"></li>
                <li>
                    <a href="#">Separated link</a>
                </li>
            </ul>
        </li>
    </ul>
    <!--</ng-container>-->
</div>

<div class="chart-container">
    <chart-box #chart [symbolModel]="activeSymbol" [showBox]="false" [quickBuy]="false" class="chart-absolute"> </chart-box>
</div>